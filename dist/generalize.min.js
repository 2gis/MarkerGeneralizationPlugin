!function(){"use strict";function t(i,e){return this instanceof t?(this._maxEntries=Math.max(4,i||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),void this.clear()):new t(i,e)}function i(t,i){t.bbox=e(t,0,t.children.length,i)}function e(t,i,e,a){for(var o,s=r(),h=i;e>h;h++)o=t.children[h],n(s,t.leaf?a(o):o.bbox);return s}function r(){return[1/0,1/0,-1/0,-1/0]}function n(t,i){return t[0]=Math.min(t[0],i[0]),t[1]=Math.min(t[1],i[1]),t[2]=Math.max(t[2],i[2]),t[3]=Math.max(t[3],i[3]),t}function a(t,i){return t.bbox[0]-i.bbox[0]}function o(t,i){return t.bbox[1]-i.bbox[1]}function s(t){return(t[2]-t[0])*(t[3]-t[1])}function h(t){return t[2]-t[0]+(t[3]-t[1])}function l(t,i){return(Math.max(i[2],t[2])-Math.min(i[0],t[0]))*(Math.max(i[3],t[3])-Math.min(i[1],t[1]))}function c(t,i){var e=Math.max(t[0],i[0]),r=Math.max(t[1],i[1]),n=Math.min(t[2],i[2]),a=Math.min(t[3],i[3]);return Math.max(0,n-e)*Math.max(0,a-r)}function u(t,i){return t[0]<=i[0]&&t[1]<=i[1]&&i[2]<=t[2]&&i[3]<=t[3]}function f(t,i){return i[0]<=t[2]&&i[1]<=t[3]&&i[2]>=t[0]&&i[3]>=t[1]}function m(t,i,e,r,n){for(var a,o=[i,e];o.length;)e=o.pop(),i=o.pop(),r>=e-i||(a=i+Math.ceil((e-i)/r/2)*r,p(t,i,e,a,n),o.push(i,a,a,e))}function p(t,i,e,r,n){for(var a,o,s,h,l,c,u,f,m;e>i;){for(e-i>600&&(a=e-i+1,o=r-i+1,s=Math.log(a),h=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*h*(a-h)/a)*(0>o-a/2?-1:1),c=Math.max(i,Math.floor(r-o*h/a+l)),u=Math.min(e,Math.floor(r+(a-o)*h/a+l)),p(t,c,u,r,n)),f=t[r],o=i,m=e,_(t,i,r),n(t[e],f)>0&&_(t,i,e);m>o;){for(_(t,o,m),o++,m--;n(t[o],f)<0;)o++;for(;n(t[m],f)>0;)m--}0===n(t[i],f)?_(t,i,m):(m++,_(t,m,e)),r>=m&&(i=m+1),m>=r&&(e=m-1)}}function _(t,i,e){var r=t[i];t[i]=t[e],t[e]=r}t.prototype={all:function(){return this._all(this.data,[])},search:function(t){var i=this.data,e=[],r=this.toBBox;if(!f(t,i.bbox))return e;for(var n,a,o,s,h=[];i;){for(n=0,a=i.children.length;a>n;n++)o=i.children[n],s=i.leaf?r(o):o.bbox,f(t,s)&&(i.leaf?e.push(o):u(t,s)?this._all(o,e):h.push(o));i=h.pop()}return e},collides:function(t){var i=this.data,e=this.toBBox;if(!f(t,i.bbox))return!1;for(var r,n,a,o,s=[];i;){for(r=0,n=i.children.length;n>r;r++)if(a=i.children[r],o=i.leaf?e(a):a.bbox,f(t,o)){if(i.leaf||u(t,o))return!0;s.push(a)}i=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0,e=t.length;e>i;i++)this.insert(t[i]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data={children:[],height:1,bbox:r(),leaf:!0},this},remove:function(t){if(!t)return this;for(var i,e,r,n,a=this.data,o=this.toBBox(t),s=[],h=[];a||s.length;){if(a||(a=s.pop(),e=s[s.length-1],i=h.pop(),n=!0),a.leaf&&(r=a.children.indexOf(t),-1!==r))return a.children.splice(r,1),s.push(a),this._condense(s),this;n||a.leaf||!u(a.bbox,o)?e?(i++,a=e.children[i],n=!1):a=null:(s.push(a),h.push(i),i=0,e=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:function(t,i){return t[0]-i[0]},compareMinY:function(t,i){return t[1]-i[1]},toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,i){for(var e=[];t;)t.leaf?i.push.apply(i,t.children):e.push.apply(e,t.children),t=e.pop();return i},_build:function(t,e,r,n){var a,o=r-e+1,s=this._maxEntries;if(s>=o)return a={children:t.slice(e,r+1),height:1,bbox:null,leaf:!0},i(a,this.toBBox),a;n||(n=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,n-1))),a={children:[],height:n,bbox:null};var h,l,c,u,f=Math.ceil(o/s),p=f*Math.ceil(Math.sqrt(s));for(m(t,e,r,p,this.compareMinX),h=e;r>=h;h+=p)for(c=Math.min(h+p-1,r),m(t,h,c,f,this.compareMinY),l=h;c>=l;l+=f)u=Math.min(l+f-1,c),a.children.push(this._build(t,l,u,n-1));return i(a,this.toBBox),a},_chooseSubtree:function(t,i,e,r){for(var n,a,o,h,c,u,f,m;;){if(r.push(i),i.leaf||r.length-1===e)break;for(f=m=1/0,n=0,a=i.children.length;a>n;n++)o=i.children[n],c=s(o.bbox),u=l(t,o.bbox)-c,m>u?(m=u,f=f>c?c:f,h=o):u===m&&f>c&&(f=c,h=o);i=h}return i},_insert:function(t,i,e){var r=this.toBBox,a=e?t.bbox:r(t),o=[],s=this._chooseSubtree(a,this.data,i,o);for(s.children.push(t),n(s.bbox,a);i>=0&&o[i].children.length>this._maxEntries;)this._split(o,i),i--;this._adjustParentBBoxes(a,o,i)},_split:function(t,e){var r=t[e],n=r.children.length,a=this._minEntries;this._chooseSplitAxis(r,a,n);var o=this._chooseSplitIndex(r,a,n),s={children:r.children.splice(o,r.children.length-o),height:r.height};r.leaf&&(s.leaf=!0),i(r,this.toBBox),i(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},_splitRoot:function(t,e){this.data={children:[t,e],height:t.height+1},i(this.data,this.toBBox)},_chooseSplitIndex:function(t,i,r){var n,a,o,h,l,u,f,m;for(u=f=1/0,n=i;r-i>=n;n++)a=e(t,0,n,this.toBBox),o=e(t,n,r,this.toBBox),h=c(a,o),l=s(a)+s(o),u>h?(u=h,m=n,f=f>l?l:f):h===u&&f>l&&(f=l,m=n);return m},_chooseSplitAxis:function(t,i,e){var r=t.leaf?this.compareMinX:a,n=t.leaf?this.compareMinY:o,s=this._allDistMargin(t,i,e,r),h=this._allDistMargin(t,i,e,n);h>s&&t.children.sort(r)},_allDistMargin:function(t,i,r,a){t.children.sort(a);var o,s,l=this.toBBox,c=e(t,0,i,l),u=e(t,r-i,r,l),f=h(c)+h(u);for(o=i;r-i>o;o++)s=t.children[o],n(c,t.leaf?l(s):s.bbox),f+=h(c);for(o=r-i-1;o>=i;o--)s=t.children[o],n(u,t.leaf?l(s):s.bbox),f+=h(u);return f},_adjustParentBBoxes:function(t,i,e){for(var r=e;r>=0;r--)n(i[r].bbox,t)},_condense:function(t){for(var e,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(e=t[r-1].children,e.splice(e.indexOf(t[r]),1)):this.clear():i(t[r],this.toBBox)},_initFormat:function(t){var i=["return a"," - b",";"];this.compareMinX=new Function("a","b",i.join(t[0])),this.compareMinY=new Function("a","b",i.join(t[1])),this.toBBox=new Function("a","return [a"+t.join(", a")+"];")}},window.L.Util.rbush=t}(),L.MarkerGeneralizeGroup=L.FeatureGroup.extend({options:{levels:[{margin:30,safeZone:20,size:[25,40],offset:[12.5,40],className:"_pin"},{safeZone:5,size:[6,6],className:"_bullet"},{safeZone:0,className:"_hidden"}],viewportHideOffset:1,checkMarkersIntersection:function(t,i){var e=Math.max(t.safeZone,i.margin);return Math.abs(t.markerX-i.markerX)>e+t.markerWidth/2+i.markerWidth/2||Math.abs(t.markerY-i.markerY)>e+t.markerHeight/2+i.markerHeight/2},checkMarkerMinimumLevel:function(){return 0}},initialize:function(t){L.Util.setOptions(this,t),this._layers={},this._priorityMarkers=[],this._otherMarkers=[],this._calculationBusy=!1,this._calculationQueued=!1,this._zoomReady={},this.on("invalidationFinish",function(){this._map.getPanes().markerPane.style.display="block"})},_getLevels:function(t){var i,e=this.options;return i="function"==typeof e.levels?e.levels(this._map,t):e.levels,this._prepareLevels(i)},_prepareLevels:function(t){var i,e,r;for(i=0;i<t.length;i++)for(r=t[i],r.markerOffset=[],r.markerDistance=[],r.size||(r.size=[0,0]),r.offset||(r.offset=[r.size[0]/2,r.size[1]/2]),e=0;2>e;e++)r.markerOffset[e]=r.size[e]/2-r.offset[e];return t},_addLayer:function(t){t._positions={},t.showAlways?this._priorityMarkers.push(t):this._otherMarkers.push(t),L.LayerGroup.prototype.addLayer.call(this,t)},_prepareMarker:function(t){for(var i,e=this._maxZoom;e>=0;e--)i=this._map.project(t.getLatLng(),e),t._positions[e]=i,t.options.classForZoom=[]},_calculateMarkersClassForEachZoom:function(){var t=this;if(this._calculationBusy)return void(this._calculationQueued=!0);this._calculationBusy=!0,this._zoomReady={},this._maxZoom=this._map.getMaxZoom();for(var i=this._map.getZoom(),e=t._map.getMaxZoom(),r=[],n=1;e>=n;n++)n!=i&&r.push(n);r.sort(function(t,e){return Math.abs(i-t)-Math.abs(i-e)}),this._calculateMarkersClassForZoom(i,function(){L.Util.UnblockingFor(function(i,e){var n=r[i];t._calculateMarkersClassForZoom(n,e)},e-1,function(){t._calculationBusy=!1,t.fireEvent("calculationFinish"),t._calculationQueued&&(t._calculationQueued=!1,t._calculateMarkersClassForEachZoom())})})},_calculateMarkersClassForZoom:function(t,i){function e(t,i){function e(i,e){for(var r=a*i;a*(i+1)>r&&_>r;r++)c.options.checkMarkerMinimumLevel(p[r])<=t?(s=n(p[r],o),f=u.search(s),c._validateGroup(s,f)?(u.insert(s),h[t].push(p[r])):m.push(p[r])):m.push(p[r]);e()}function r(){p=m.slice(),m=[],i()}if(o=l[t],0==l[t].size[0]&&0==l[t].size[1])return h[t]=p.slice(),void i();var a=1e3,_=p.length,d=Math.ceil(_/a);L.Util.UnblockingFor(e,d,r)}function r(){var e,r,n,a,o;for(e=0;e<l.length;e++)for(a=l[e].className,n=l[e],r=0;r<h[e].length;r++)o=h[e][r],o.options.classForZoom[t]=a;c._zoomReady[t]=!0,c._map.getZoom()==t&&c._invalidateMarkers(),i()}function n(i,e){var r=e.safeZone||0,n=e.margin||0,a=Math.max(r,n),o=i._positions[t].x-e.offset[0]-a,s=i._positions[t].y-e.offset[1]-a,h=e.size[0]+2*a,l=e.size[1]+2*a,c=[o,s,o+h,s+l];return c.marker=i,c.safeZone=r,c.margin=n,c.markerX=i._positions[t].x+e.markerOffset[0],c.markerY=i._positions[t].y+e.markerOffset[1],c.markerHeight=e.size[1],c.markerWidth=e.size[0],c}var a,o,s,h={},l=this._getLevels(t),c=this;for(a=0;a<l.length;a++)h[a]=[];var u=L.Util.rbush();for(o=l[0],a=0;a<this._priorityMarkers.length;a++)s=this._prepareMarker(a),h[o].push(s),u.insert(n(s,o));var f,m=[],p=this._otherMarkers.slice();L.Util.UnblockingFor(e,l.length,r)},_getPixelBoundsForZoom:function(t){var i,e=Number.MAX_VALUE,r=Number.MAX_VALUE,n=0,a=0;return this.eachLayer(function(o){i=o._positions[t],e=Math.min(e,i.x),r=Math.min(r,i.y),n=Math.max(n,i.x),a=Math.max(a,i.y)}),{x:e,y:r,width:n-e,height:a-r}},_validateGroup:function(t,i){if(0==i.length)return!0;var e,r=this.options;for(e=0;e<i.length;e++)if(!r.checkMarkersIntersection(t,i[e]))return!1;return!0},_invalidateMarkers:function(){var t,i=this._map.getZoom();this._zoomReady[i]&&(this.eachLayer(function(e){t=e.options.classForZoom[i],t&&e.options.state!=t&&(e.options.state&&L.DomUtil.removeClass(e._icon,e.options.state),L.DomUtil.addClass(e._icon,t),e.options.state=t)},this),this.fireEvent("invalidationFinish"))},_hideMarkersOutOfViewPort:function(){var t=this._map.getZoom(),i=this._map.getPixelBounds(),e=(i.max.x-i.min.x)*this.options.viewportHideOffset,r=(i.max.y-i.min.y)*this.options.viewportHideOffset;this.eachLayer(function(n){var a=n._positions[t];n._icon.style.display=a.x>i.min.x-e&&a.x<i.max.x+e&&a.y>i.min.y-r&&a.y<i.max.y+r?"":"none"})},_zoomStart:function(){this._map.getPanes().markerPane.style.display="none"},_zoomEnd:function(){this._invalidateMarkers(),this._hideMarkersOutOfViewPort()},_dragEnd:function(){this._hideMarkersOutOfViewPort()},addLayer:function(t){return this._addLayer(t),this._map&&(this._prepareMarker(t),this._calculateMarkersClassForEachZoom(),this._invalidateMarkers()),this},addLayers:function(t){var i;for(i=0;i<t.length;i++)this._addLayer(t[i]);return this._map&&(this.eachLayer(this._prepareMarker,this),this._calculateMarkersClassForEachZoom()),this},_removeLayer:function(t){var i=this._layers.length;return L.LayerGroup.prototype.removeLayer.call(this,t),i-this._layers.length!=0},removeLayer:function(t){return this._removeLayer(t)&&(this._calculateMarkersClassForEachZoom(),this._invalidateMarkers()),this},onAdd:function(t){this._map=t,this._maxZoom=this._map.getMaxZoom(),t.on("zoomstart",this._zoomStart,this),t.on("zoomend",this._zoomEnd,this),t.on("dragend",this._dragEnd,this),this.eachLayer(this._prepareMarker,this),setTimeout(this._calculateMarkersClassForEachZoom.bind(this),0),L.LayerGroup.prototype.onAdd.call(this,t)},onRemove:function(t){this._map&&(t.off("zoomstart",this._zoomStart,this),t.off("zoomend",this._zoomEnd,this),t.off("dragend",this._dragEnd,this),L.LayerGroup.prototype.onRemove.call(this,t),this.eachLayer(function(t){t.options.state=""}),this._map=null)},clearLayers:function(){var t;for(t in this._layers)this._removeLayer(this._layers[t]);return this._priorityMarkers=[],this._otherMarkers=[],this}}),L.markerGeneralizeGroup=function(t){return new L.MarkerGeneralizeGroup(t)},L.Util.UnblockingFor=function(t,i,e){function r(i){setTimeout(function(){t(i,n)},0)}function n(){a++,i>a?r(a):e()}e=e||function(){};var a=0;r(a)};